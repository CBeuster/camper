{% set menu="blog" %}
{% extends "admin_master.html" %}

{% import "macros.html" as formmacros with context %}
{% block content %}
    {% block title %}
        <h1>{{_('Edit Blog Entry')}}</h1>
    {% endblock %}
    <form class="form-validate validate" method="POST" action="{{url}}">  
        <fieldset>
            {{ formmacros.form_field(form.title, input_class="required", placeholder="Title of blog post") }}
            {{ formmacros.form_field(form.content, input_class="required wysiwyg", rows=10) }}
            {{ formmacros.form_field(
                form.published, 
                immediate_label = _('Published immediately'), 
                edit_label = _('Edit'),
                cancel_label = _('Cancel')
            ) }}
            {{ formmacros.form_field(form.image, input_class="",
                label=_("Upload new image"), delete_label=_("Delete"), revert_label=_("Revert to original image"),
                preview_url = view.image_url.small,
                upload_url=url_for("asset_upload", slug=slug), postproc="sponsor")}}
        {% block action %}
            <input type="submit" class="btn btn-lg btn-primary" value="{{_('update blog entry')}}">
        {% endblock %}
    </form>
{% endblock %}
