{% extends "barcamp/master.html" %}

{% block main_content %}
    <h1>Sessionvorschl√§ge</h1>  

    <div class="nowell">
        <legend>Dein Themenvorschlag</legend>
        <form method="post" action="{{url}}" class="form-horizontal">
            {{formmacros.form_field(form.title, class="required span8")}}
            {{formmacros.form_field(form.description, rows=5, cols=80, class="span8")}}
            <div class="form-actions">
                <input type="submit" class="btn btn-large btn-primary" value="Vorschlagen!">
            </div>
        </form>
    </div>
    <h1>
        <div id="sort-buttons" class="pull-right">
            <span class="btn-group" data-toggle="buttons-radio">
              <a href="{{url}}?sort=date" id="sort-date" type="button" class="btn btn-mini {{'btn-success active' if sort=="date"}}">Datum</a>
              <a href="{{url}}?sort=votes" id="sort-votes" type="button" class="btn btn-mini {{'btn-success active' if sort=="votes"}}">Bewertung</a>
            </span>
        </div>
    </h1>
    
    <section id="sessionproposals">
    {% for session in sessions %}
            <article class="session">
                <aside class="votecontainer" data-url="{{url_for("barcamp_session_vote", slug = slug, sid = session._id)}}">
                    <div class="votes" id="vote-90b5d410-2891-4516-bfa2-bc0598a2d774">{{session.vote_count}}</div>
                    <div class="votebutton">
                        <a id="votebutton-{{session._id}}" data-id="{{session._id}}" class="vote {{'active' if session.has_voted(user._id) else 'inactive'}}"></a>
                    </div>
                </aside>
                <header>
                    <h4>{{session.title|striptags}}</h4>
                </header>
                <div class="description">
                    {{session.description|md(level=3)}}
                </div>
                <footer>
                    eingestellt von {{session.user.username}} am {{session.created.strftime("%d.%m.%Y")}}
                </footer>
            </article>
    {% endfor %}
    </section>

{% endblock %}
{% block js %}
<script src="{{url_for("static", filename="js/sessions.js")}}" type="text/javascript"></script>
{% endblock %}
